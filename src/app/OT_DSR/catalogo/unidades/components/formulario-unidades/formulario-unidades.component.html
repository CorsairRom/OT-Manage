<h3 class="pb-3">Unidad</h3>
  <form [formGroup]="form" >

    <div class="grid mb-3">
      <div class="col-12 flex flex-column gap-2">
        <span class="p-float-label">
          <input
            type="text"
            pInputText
            formControlName="codigo"
            autofocus
            placeholder="LA12345"
            [style]="{ width: '100%' }"
          />
          <label>Codigo*</label>
        </span>
        <!-- <small>Rut con puntos y con gui√≥n,
              <strong> Ej: 11.625.443-8</strong>
          </small> -->
      </div>
    </div>

    <div class="grid mb-3">
      <div class="col-12 flex flex-column gap-2">
        <span class="p-float-label">
          <input
            type="text"
            pInputText
            formControlName="nombre"
            placeholder="Banana Conector"
            [style]="{ width: '100%' }"
          />
          <label>Nombre*</label>
        </span>
      </div>

    </div>

    <div class="grid mb-4">
      <div class="col flex flex-column gap-2">
        <p-selectButton
          [options]="opcionesEstadoUnidades"
          formControlName="estado"
          optionLabel="label"
          optionValue="value"
        >
        </p-selectButton>
      </div>
      <div class="col flex flex-column gap-2"></div>
    </div>



    <div *ngIf="templateAdd" class="grid mb-4">
      <div class="col flex flex-column gap-2">
        <h5 class="pb-0 mb-0">Subunidades Registradas</h5>
        <hr class="mt-0 p-0">
        <div class="" formArrayName="subunidades">
          <!-- Utilizamos subunidades.controls para acceder a los controles del FormArray -->
          <div class="mb-1" *ngFor="let subunidad of subunidades.controls; let i = index" [formGroupName]="i">
            <div class="p-inputgroup">
              <!-- Utilizamos formGroupName para enlazar el FormGroup dentro del FormArray -->
              <input type="text" pInputText placeholder="codigo" class="mr-2" formControlName="codigo" />
              <input type="text" pInputText placeholder="nombre" formControlName="nombre" />
              <button type="button" pButton icon="pi pi-trash" class="p-button-danger"></button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="grid mb-4">
      <div class="col-12 flex flex-column gap-2">
        <p-button
        styleClass="mr-3"
        label="Agregar SubUnidad"
        [style]="{ width: '100%' }"
        (click) = toggleSubunidades()
      ></p-button>
      </div>
    </div>



    <div class="flex">
      <p-button
        styleClass="mr-3"
        [disabled]="form.invalid"
        label="Guardar"
        (click)="submit()"
      ></p-button>
      <p-button
        label="Cancelar"
        styleClass="p-button-danger"
        (click)="cancel()"
      ></p-button>
    </div>
  </form>

